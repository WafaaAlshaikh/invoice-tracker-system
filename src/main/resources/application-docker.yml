spring:
  application:
    name: invoicetracker
  
  datasource:
    url: jdbc:mysql://mysql:3306/invoice_tracker?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
    username: appuser
    password: apppassword
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
  
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true
        jdbc:
          batch_size: 20
  
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

# ========== ACTUATOR CONFIGURATION ==========
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
      base-path: /actuator
    enabled-by-default: true
  endpoint:
    health:
      show-details: always
      enabled: true
      probes:
        enabled: true
    info:
      enabled: true
    metrics:
      enabled: true
  health:
    db:
      enabled: true
    diskspace:
      enabled: true

# ========== DUPLICATE CHECK SERVICE ==========
duplicate:
  check:
    service:
      url: ${DUPLICATE_CHECK_SERVICE_URL:http://duplicate-check-service:8081}
    enabled: ${DUPLICATE_CHECK_ENABLED:true}
    timeout: 5000

# ========== FILE UPLOAD ==========
file:
  upload-dir: ${FILE_UPLOAD_DIR:/usr/local/tomcat/webapps/uploads}

# ========== GEMINI AI ==========
google:
  ai:
    api:
      key: ${GEMINI_API_KEY}
    model: gemini-1.5-flash
    base-url: https://generativelanguage.googleapis.com/v1beta

# ========== LOGGING ==========
# Logging Configuration
logging:
  level:
    com.example.invoicetracker.service.external.DuplicateCheckClient: DEBUG
    com.example.invoicetracker.service.InvoiceService: DEBUG
    org.springframework.web.client.RestTemplate: DEBUG
    org.springframework.web: DEBUG
  
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  
  file:
    name: /usr/local/tomcat/logs/invoice-tracker.log